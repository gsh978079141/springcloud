server:
  port: 8001

endpoints:
  health:
    sensitive: false
    enabled: true

management:
  security:
    enabled: false
  endpoints:
    web:
      exposure:
        include: "*"
      base-path: /actuator
  endpoint:
    health:
      show-details: always
    gateway:
      enabled: true

spring:
  application:
    name: gateway-api
  profiles:
    active: ${env_profile:uat}
  main:
    allow-bean-definition-overriding: true
  messages:
    encoding: UTF-8
  mvc:
    throw-exception-if-no-handler-found: true
  cloud:
    gateway:
      discovery:
        locator:
          enabled: true
          lowerCaseServiceId: true
      routes:
        #        - id: service-account
        #          uri: http://service-account:6001
        #          predicates:
        #            - Path=/account-apis/**
        #          filters:
        #            - StripPrefix=1
        #        - id: service-dict
        #          uri: http://service-dict:6002
        #          predicates:
        #            - Path=/dict-apis/**
        #          filters:
        #            - StripPrefix=1
        #        - id: service-oss
        #          uri: http://service-oss:6004
        #          predicates:
        #            - Path=/oss-apis/**
        #          filters:
        #            - StripPrefix=1
        #        - id: service-foundation
        #          uri: http://service-foundation:7001
        #          predicates:
        #            - Path=/foundation-apis/**
        #          filters:
        #            - StripPrefix=1
        - id: service-user
          #          uri: http://service-user:7003
          # lb代表从注册中心获取服务
          uri: lb://service-user
          predicates:
            #            - Path=/user-apis/**
            - Path=/users/**
            # http://127.0.0.1:8001/users/users/deleteById?id=1
            # filters.StripPrefix=1:过滤掉前面设置的Path:/user-apis->真实的请求路径为：/users/deleteById?id=1
#          filters:
#            - StripPrefix=1

logging:
  file:
    path: ${log_dir:/var/log/edu}/${spring.application.name}